<%
  no_cache
  breadcrumb Happening.model_name.human(count: 2) => nil
%>

<% @datatable.activities.each do |activity| %>
  <span class='show-on-hover'>
    <span class='badge badge-secondary'>
      <%= activity.name %>
    </span>
    <% remove_path = index_for_location_and_activities_path(activity_names: params[:activity_names] - [activity.name]) %>
    <%= link_to remove_path do %>
      <i class='demo-icon icon trash-empty'></i>
    <% end %>
  </span>
<% end %>
<div class='dropdown'>
  <a class='btn btn-se dropdown-toggle' href='#' role='button' id='dropdownAddActivity' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
    <%= t_crud('add', Activity) %>
  </a>
  <div class='dropdown-menu' aria-labelledby='dropdownAddActivity'>
    <% Activity.where.not(name: params[:activity_names]).each do |activity| %>
      <% add_path = index_for_location_and_activities_path(activity_names: params[:activity_names] + [activity.name]) %>
      <%= link_to activity.name, add_path, class:'dropdown-item' %>
    <% end %>
  </div>
</div>

<%= @datatable.render_html search_posts_path(format: :json) %>
